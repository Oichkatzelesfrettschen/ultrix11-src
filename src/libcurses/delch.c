
/**********************************************************************
 *   Copyright (c) Digital Equipment Corporation 1984, 1985, 1986.    *
 *   All Rights Reserved. 					      *
 *   Reference "/usr/src/COPYRIGHT" for applicable restrictions.      *
 **********************************************************************/

/* SCCSID: @(#)delch.c	3.0	4/22/86 */
#include "curses.ext"

/*
 *	This routine performs an insert-char on the line, leaving
 * (_cury,_curx) unchanged.
 *
 * @(#)delch.c	1.2 (Berkeley) 5/11/81
 */
/**
 * @brief Delete a character at the current cursor position.
 *
 * @param win Window to modify.
 * @return OK on success or ERR on failure.
 */
int wdelch(WINDOW *win)

    reg char *temp1,
    *temp2;
reg char *end;

end = &win->_y[win->_cury][win->_maxx - 1];
temp1 = &win->_y[win->_cury][win->_curx];
temp2 = temp1 + 1;
while (temp1 < end)
  *temp1++ = *temp2++;
*temp1 = ' ';
win->_lastch[win->_cury] = win->_maxx - 1;
if (win->_firstch[win->_cury] == _NOCHANGE ||
    win->_firstch[win->_cury] > win->_curx)
  win->_firstch[win->_cury] = win->_curx;
return OK;
}
